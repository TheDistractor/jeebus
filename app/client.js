// Generated by CoffeeScript 1.7.1
(function() {
  var ng;

  ng = angular.module('myApp', ['ui.router']);

  ng.run(function(jeebus) {
    return jeebus.connect('blinker');
  });

  ng.controller('MainCtrl', function($scope, $timeout, jeebus) {
    $timeout(function() {
      $scope.admin = jeebus.attach('/admin/');
      $scope.$on('$destroy', function() {
        return jeebus.detach('/admin/');
      });
      $scope.blinker = jeebus.attach('/blinker/');
      return $scope.$on('$destroy', function() {
        return jeebus.detach('/blinker/');
      });
    }, 100);
    $scope.button = function(button, value) {
      return jeebus.send({
        button: button,
        value: value
      });
    };
    $scope.echoTest = function() {
      jeebus.send("echoTest!");
      return jeebus.rpc('echo', 'Echo', 'me!').then(function(r) {
        return $scope.message = r;
      });
    };
    $scope.dbGetTest = function() {
      return jeebus.rpc('db-get', '/jeebus/started').then(function(r) {
        return $scope.message = r;
      });
    };
    $scope.dbKeysTest = function() {
      return jeebus.rpc('db-keys', '/').then(function(r) {
        return $scope.message = r;
      });
    };
    return $scope.luaTest = function() {
      return jeebus.rpc('lua', 'demo', 'twice', 111).then(function(r) {
        return $scope.message = r;
      });
    };
  });

}).call(this);
